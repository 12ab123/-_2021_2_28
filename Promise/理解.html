<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<!--<script>                              // 成功    失败-->
<!--var promise1 = new Promise(function (resolve, reject) {      //excutor     执行器函数     同步回调函数-->
<!--    //开始时promise的状态为pending     未确定的/初始化-->
<!--    //启动异步操作-->
<!--    console.log('初始化状态');-->
<!--    setTimeout(function () {-->
<!--        //成功了-->
<!--        resolve('foo')     //promise的状态变为resolved/成功,同时指定成功的value-->
<!--    }, 1000)-->
<!--})-->
<!--console.log('初始化结束');-->
<!--promise1.then(function (value) {          //异步执行的成功的回调函数-->
<!--    console.log('成功');-->
<!--    console.log(value);-->
<!--})-->
<!--console.log(promise1);-->
<!--</script>-->

<script>
    //使用Promise封装异步的ajax请求
    function myAsyncFunction(url) {
        return new Promise((resolve, reject) => {
            const xhr = new XMLHttpRequest()
            xhr.open('get', url)
            xhr.onload = () => resolve(JSON.parse(xhr.responseText))     //成功的回调
            xhr.onerror = () => reject(xhr.statusText)      //出错的回调
            xhr.send()
        })
    }

    myAsyncFunction('https://api.apiopen.top/getJoke?page=1&count=2&type=video').then(
        value => {
            console.log('成功了' , value);
        },
        reason => {
            console.log('失败了' , reason);
        }

    )
</script>
</body>
</html>